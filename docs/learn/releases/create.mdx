---
title: "Create releases"
---

import { Framed } from '/snippets/components/framed.jsx';
import Annotations from '/snippets/references/cli/releases/create/schema-annotations.mdx';
import CreateNewSchemas from '/snippets/references/cli/releases/create/new-schemas.mdx';
import CreateExistingSchemas from '/snippets/references/cli/releases/create/existing-schemas.mdx';
import CuePackages from '/snippets/references/cli/releases/create/cue-packages.mdx';
import CLIFlags from '/snippets/references/cli/releases/create/flags.mdx';
import CLIUsage from '/snippets/references/cli/releases/create/usage.mdx';

<Framed 
background="https://assets.mirurobotics.com/docs/v03/images/releases/background.jpeg" 
image="https://assets.mirurobotics.com/docs/v03/images/releases/header:release-create.png" 
borderWidth="28px"
innerRadius="8px"
outerRadius="10px"
/>

The primary method of creating releases is via the command line. The dashboard does not support creating new releases (although you can [duplicate existing releases](/docs/learn/releases/manage#duplicate-a-release)).

Creating releases from the CLI is a deliberate design choice. We believe that config schemas should live in the same Git repository as the code which uses them. The CLI promotes such practices, simplifying the release process and encouraging better software development habits.

Furthermore, the CLI can be used to programmatically create releases in a [CI pipeline](/docs/developers/ci/overview), ensuring releases contain the correct schemas and are always associated with the correct Git commit.

If you've created a release via the CLI before and want a concise overview of the command and its flags, visit the [CLI Reference](/docs/references/cli/release-create). For a comprehensive guide, continue reading below.

## Prerequisites

To create a release, the following prerequisites must be met:

1. CLI installed - [install](/docs/developers/cli/install) the Miru CLI on your development machine and authenticate using the [login](/docs/developers/cli/login) command
1. Local Git repository - the release's schemas must be committed to a local Git repository
1. Config types annotations - each schema must be annotated with its [config type](/docs/learn/config-types)

## Config schemas

A release may be created with any number of config schemas, but it must contain at least one.

Schemas don't need to be created separately from releases. Instead, the CLI creates the schemas in the same command as the release itself.

Since schemas may belong to multiple releases, specifying schemas which already exist in Miru is perfectly valid. The CLI simply attaches the schemas to the release. 

The CLI identifies schemas by hashing their content. Schemas with equivalent content are considered identical in Miru (even if the comments, spacing, or other formatting is different).

### Define the schemas

Schemas must be defined in a supported schema [language](/docs/learn/schemas/languages/overview). You can find example schemas in our [getting-started repository](https://github.com/mirurobotics/getting-started).

If you're not sure which language to use, we recommend starting with JSON Schema â€” it's the most widely used and easiest to get started with.

If you don't currently use a schema, we recommend starting with an empty schema, one that regards all config instances as valid. Over time, you can gradually add constraints to make it more strict.

<CodeGroup>

```yaml JSON Schema
$schema: "https://json-schema.org/draft/2020-12/schema"
x-miru-config-type: "{your-config-type-slug}"
```

```cue CUE
@miru(config_type="{your-config-type-slug}")
```

</CodeGroup>

### Schema annotations

Annotations are a convenient way to store metadata with your schemas. Most annotations are optional, but some are required for Miru to process the schemas correctly.

<Annotations />

### CUE packages

<CuePackages />

## Git commit

When creating a release, the CLI captures the following Git metadata from the *local* Git repository where the CLI is run:

| Metadata | Description |
|----------|-------------|
| **Commit SHA** | The SHA of the current commit |
| **Origin URL** | The remote URL of the Git repository |
| **File paths** | The file paths of the schemas relative to the repository root |

This metadata is then made available in the dashboard for the release, allowing you to easily trace the release's origin.

### Supported Git providers

The following Git providers are currently supported:

- GitHub
- GitLab
- Bitbucket

If your Git repository is hosted on a different provider, please reach out to [support@mirurobotics.com](mailto:support@mirurobotics.com).

### Requirements

To be able to capture Git metadata, the provided config schemas must meet the following requirements when creating a release via the CLI:

- Schemas must be defined in a local Git repository
- The Git repository must have a remote URL (e.g., GitHub, GitLab, Bitbucket).
- The schema's latest changes must be committed to the Git repository before pushing to Miru (cannot be dirty or unstaged)

Git metadata is not optional. If a schema does not meet these requirements, the CLI will return an error and fail to create the release.

## CLI command

Once you've defined the schemas and committed them to Git, you're ready to create a release.

### Usage

You must specify two flags when creating a release: the version and the schemas. Schemas can be specified as a directory or as individual files.

<CLIUsage />

### Flags

Below are the CLI flags which can be specified when creating a release.

<CLIFlags />

### Examples

Below are some examples of what the CLI command might look like when creating a release.

<Tabs>
  <Tab title="New schemas">
    <CreateNewSchemas />
  </Tab>
  <Tab title="Existing schemas">
    <CreateExistingSchemas />
  </Tab>
</Tabs>
